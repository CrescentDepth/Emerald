<Page
    x:Class="Emerald.WinUI.Views.Settings.AboutPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:App="using:Emerald.WinUI"
    xmlns:Main="using:Emerald.WinUI"
    xmlns:SS="using:Emerald.WinUI.Helpers.Settings"
    xmlns:animations="using:CommunityToolkit.WinUI.UI.Animations"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:helpers="using:Emerald.WinUI.Helpers"
    xmlns:json="using:Emerald.WinUI.Helpers.Settings.JSON"
    xmlns:local="using:Emerald.WinUI.Views.Settings"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:uc="using:Emerald.WinUI.UserControls"
    mc:Ignorable="d">

    <Grid Margin="16">
        <Grid.Resources>
            <ResourceDictionary Source="/ResourceDictionaries/Expanders.xaml" />
        </Grid.Resources>

        <StackPanel Spacing="16">

            <Border
                Height="auto"
                Padding="12,12,12,0"
                Style="{StaticResource SettingsCard}">
                <uc:AdaptiveItemPane IsStackedCenter="True" StretchContent="True">
                    <uc:AdaptiveItemPane.LeftPane>
                        <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                            <Image Height="40" Source="/Assets/icon.png" />
                            <TextBlock
                                Margin="5,0,0,0"
                                VerticalAlignment="Center"
                                FontSize="30"
                                FontWeight="Bold"
                                Text="Emerald">
                                <TextBlock.Foreground>
                                    <LinearGradientBrush>
                                        <GradientStop Offset="0.1" Color="#4FC3B0" />
                                        <GradientStop Color="#23938F" />
                                        <GradientStop Offset="0.8" Color="#228694" />
                                    </LinearGradientBrush>
                                </TextBlock.Foreground>
                            </TextBlock>
                            <TextBlock
                                Margin="3,0,0,0"
                                VerticalAlignment="Top"
                                FontFamily="18"
                                FontWeight="Bold"
                                Text="DEV">
                                <TextBlock.Foreground>
                                    <LinearGradientBrush>
                                        <GradientStop Offset="0.1" Color="{ThemeResource SystemAccentColorLight1}" />
                                        <GradientStop Color="{ThemeResource SystemAccentColor}" />
                                        <GradientStop Offset="0.8" Color="{ThemeResource SystemAccentColorDark1}" />
                                    </LinearGradientBrush>
                                </TextBlock.Foreground>
                            </TextBlock>
                        </StackPanel>
                    </uc:AdaptiveItemPane.LeftPane>
                    <uc:AdaptiveItemPane.MiddlePane>
                        <StackPanel
                            HorizontalAlignment="Center"
                            Orientation="Horizontal"
                            Spacing="12">
                            <Button
                                x:Name="Version"
                                Click="Version_Click"
                                Style="{StaticResource TransparentButtonStyle}">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon VerticalAlignment="Center" Glyph="&#xE946;" />

                                    <StackPanel VerticalAlignment="Center" Orientation="Vertical">
                                        <TextBlock FontWeight="SemiBold" Text="{helpers:Localize CustomName=Version, RESW=Settings}" />
                                        <TextBlock
                                            FontSize="12"
                                            Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"
                                            Text="{x:Bind App:DirectResoucres.AppVersion}" />
                                    </StackPanel>
                                </StackPanel>
                            </Button>
                            <Button Style="{StaticResource TransparentButtonStyle}" Tag="Insider">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon VerticalAlignment="Center" Glyph="&#xECA7;" />

                                    <StackPanel VerticalAlignment="Center" Orientation="Vertical">
                                        <TextBlock FontWeight="SemiBold" Text="{helpers:Localize CustomName=Credits, RESW=Settings}" />
                                        <TextBlock
                                            FontSize="12"
                                            Foreground="{ThemeResource ApplicationSecondaryForegroundThemeBrush}"
                                            Text="{helpers:Localize CustomName=CreditsDescription,
                                                                    RESW=Settings}" />
                                    </StackPanel>
                                </StackPanel>
                            </Button>

                            <HyperlinkButton NavigateUri="https://github.com/OpenAndrexial/Emerald/Contribute">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon VerticalAlignment="Center" Glyph="&#xEC7A;" />

                                    <StackPanel VerticalAlignment="Center" Orientation="Vertical">
                                        <TextBlock FontWeight="SemiBold" Text="{helpers:Localize CustomName=Github, RESW=Settings}" />
                                        <TextBlock FontSize="12" Text="{helpers:Localize CustomName=Contribute, RESW=Settings}" />
                                    </StackPanel>
                                </StackPanel>
                            </HyperlinkButton>
                        </StackPanel>
                    </uc:AdaptiveItemPane.MiddlePane>
                </uc:AdaptiveItemPane>
            </Border>

            <StackPanel Spacing="4">
                <TextBlock FontWeight="SemiBold" Text="{helpers:Localize CustomName=More, RESW=Settings}" />

                <uc:Expander
                    Title="{helpers:Localize CustomName=Links,
                                             RESW=Settings}"
                    Description="{helpers:Localize CustomName=LinksDescription,
                                                   RESW=Settings}"
                    ExpanderStyle="Static"
                    Icon="&#xE12B;">
                    <StackPanel Orientation="Horizontal">
                        <HyperlinkButton Content="Discord" NavigateUri="https://discord.gg/x7MPYvzGMT" />
                        <HyperlinkButton Content="Source code" NavigateUri="https://github.com/OpenAndrexial/Emerald" />
                        <HyperlinkButton Content="Website" NavigateUri="https://www.andrexial.co.uk/" />
                    </StackPanel>
                </uc:Expander>
                <uc:Expander
                    Title="{helpers:Localize CustomName=SettingsBackups,
                                             RESW=Settings}"
                    Description="{helpers:Localize CustomName=SettingsBackupsDescription,
                                                   RESW=Settings}"
                    Icon="&#xE159;">
                    <uc:Expander.HeaderControls>
                        <Button
                            x:Name="CreateBackup"
                            Click="CreateBackup_Click"
                            Content="{helpers:Localize CustomName=CreateBackup,
                                                       RESW=Settings}" />
                    </uc:Expander.HeaderControls>
                    <Grid ChildrenTransitions="{StaticResource AddDeleteThemeTransition}">
                        <CommandBar
                            x:Name="cmdBarBackups"
                            Margin="0,-15,-15,0"
                            HorizontalAlignment="Right"
                            x:Load="{x:Bind LoadBackupCMDBar, Mode=OneWay}"
                            Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                            Canvas.ZIndex="2"
                            DefaultLabelPosition="Right">
                            <AppBarButton
                                Click="DeleteBackup_Click"
                                Icon="Delete"
                                Label="{helpers:Localize CustomName=Delete,
                                                         RESW=Settings}" />
                            <AppBarButton
                                Click="ViewBackup_Click"
                                Icon="View"
                                Label="{helpers:Localize CustomName=View,
                                                         RESW=Settings}" />
                            <AppBarButton Icon="Upload" Label="{helpers:Localize CustomName=TryLoad, RESW=Settings}" />
                        </CommandBar>
                        <ListView x:Name="lvBackups" SelectionChanged="lvBackups_SelectionChanged">
                            <ListView.ItemTemplate>
                                <DataTemplate x:DataType="json:SettingsBackup">
                                    <TextBlock Margin="5">
                                        <Run Text="{x:Bind Time.ToLongDateString()}" />
                                        <Run Text="{x:Bind Time.ToShortTimeString()}" />
                                    </TextBlock>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </Grid>
                </uc:Expander>
                <uc:Expander
                    x:Name="expWinHello"
                    Title="{helpers:Localize CustomName=WindowsHello,
                                             RESW=Settings}"
                    Description="{helpers:Localize CustomName=WindowsHelloDescription,
                                                   RESW=Settings}"
                    ExpanderStyle="Static"
                    Icon="&#xE75F;">
                    <ToggleSwitch x:Name="tglWinHello" Toggled="ToggleSwitch_Toggled" />
                </uc:Expander>
            </StackPanel>

        </StackPanel>

        <TeachingTip
            x:Name="vTip"
            Title="{helpers:Localize CustomName=MoreVerInfo,
                                     RESW=Settings}"
            ActionButtonClick="vTip_ActionButtonClick"
            ActionButtonContent="{helpers:Localize CustomName=CheckForUpdates,
                                                   RESW=Settings}"
            CloseButtonClick="vTip_CloseButtonClick"
            CloseButtonContent="{helpers:Localize CustomName=CopyVersion,
                                                  RESW=Settings}"
            IsLightDismissEnabled="True"
            IsOpen="False"
            PreferredPlacement="Bottom"
            Target="{x:Bind Version}">
            <TeachingTip.Content>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Margin="0,0,5,0">
                        <Run Text="{helpers:Localize CustomName=Version, RESW=Settings}" />
                    </TextBlock>
                    <TextBlock Grid.Column="1" Text="{x:Bind App:DirectResoucres.AppVersion}" />
                    <TextBlock Grid.Row="1" Margin="0,0,5,0">
                        <Run Text="{helpers:Localize CustomName=BuildType, RESW=Settings}" />
                    </TextBlock>
                    <TextBlock
                        Grid.Row="1"
                        Grid.Column="1"
                        Text="{x:Bind App:DirectResoucres.BuildType}" />
                </Grid>
            </TeachingTip.Content>
        </TeachingTip>

    </Grid>
</Page>
